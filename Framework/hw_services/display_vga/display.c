/*

 *********************************************************************************************
 *******************************    	  C SOURCE FILE       ********************************
 ** 	 	 	 	 	 	    *******************************                    		    **
 ** 																						**
 ** 	project  : 	simpleWatch																**
 ** 	filename :	display.c																**
 ** 	version  :	1																		**
 ** 	date     :	6/11/2015																**
 ** 																						**
 ******************************************************************************************
 ** 																						**
 ** 	Copyright (c) 2015, Jorge Lampérez													**
 ** 	All rights reserved.																**
 ** 																						**
 ******************************************************************************************

 VERSION HISTORY:
 ----------------

 Version       : 1
 Date          : 29/10/2015
 Revised by    : Jorge Lampérez
 Description   : Implementación de las funciones del módulo Display para VGA.

 */

/*************************************************************************************/
/** 																			 	**/
/** 						MODULES USED					 						**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/
#include <stdio.h>
#include "../hal_core/hw_abstraction.h"

#include "../hal_core/display.h"
#include "display_vga.h"

/*************************************************************************************/
/** 																			 	**/
/** 						DEFINITIONS AND MACROS					 				**/
/** 				 										 						**/
/** 											 								 	**/
/*************************************************************************************/

/*************************************************************************************/
/** 																			 	**/
/** 						TYPEDEFS AND STRUCTURES					 				**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/

/*************************************************************************************/
/** 																			 	**/
/** 						PROTOTYPES OF LOCAL FUNCTIONS					 		**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/
void DISPLAY_Car(int x, int y);

/*************************************************************************************/
/** 																			 	**/
/** 						EXPORTED VARIABLES					 					**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/
/*************************************************************************************/
/** 																			 	**/
/** 						GLOBAL VARIABLES						 				**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/

/*************************************************************************************/
/** 																			 	**/
/** 						EXPORTED FUNCTIONS								 		**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/

/*************************************************************************************/
/** 																			 	**/
/** 						LOCAL FUNCTIONS						 					**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/

/*****************************************************************************/
/*
 *
 * Esta función inicializa tanto el VGA.
 *
 * @return	None.
 *
 * @note    None.
 *
 ******************************************************************************/
void DISPLAY_init() {

#if defined(ZYNQ_7000) && defined(VGA_DISPLAY)
	displayInit();
#endif

}
/*****************************************************************************/
/*
 *
 * Esta función sirve para imprimir por VGA una cadena de caracteres.
 *
 * @param	str es una array de caracteres.
 *
 * @return	None.
 *
 * @note		None.
 *
 ******************************************************************************/
void DISPLAY_printString(char str[]) {
	static int y = 0;
	static int x = 0;
#if defined(ZYNQ_7000) &&  defined(VGA_DISPLAY)

	DISPLAY_Car(x, y);
	if (strstr(str, "GOING_FORWARD") > 0) {
		y = y - 5;
	} else if (strstr(str, "GOING_RIGHT") > 0) {
		x = x + 5;
	} else if (strstr(str, "GOING_LEFT") > 0) {
		x = x - 5;
	} else if (strstr(str, "GOING_BACK") > 0) {
		y = y + 5;
	} else if (strstr(str, "STOPPED") > 0) {

	}

#endif

}

/*****************************************************************************/
/*
 *
 * Función que retorna 0.
 *
 *
 * @return	0.
 *
 * @note		None.
 *
 ******************************************************************************/
int DISPLAY_readInteger() {

	return 0;

}

/************************************************************************************/
/**																				   **/
/**								Car display functions.							   **/
/**																				   **/
/************************************************************************************/
void DISPLAY_Car(int x, int y) {
	borrarFrameBuffer();

	displayTestRect(100 + x, 100 + y, 20, 40);
	displayTestRect(95 + x, 105 + y, 5, 10);
	displayTestRect(95 + x, 125 + y, 5, 10);
	displayTestRect(120 + x, 105 + y, 5, 10);
	displayTestRect(120 + x, 125 + y, 5, 10);

	copiarFrameBuffer();

	updateFrame();
}

/*************************************************************************************/
/** 																			 	**/
/** 						EOF					 								 	**/
/** 														 						**/
/** 																			 	**/
/*************************************************************************************/

